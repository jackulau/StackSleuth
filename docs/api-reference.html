<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Reference - StackSleuth</title>
    <link rel="stylesheet" href="css/gitbook.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <link rel="icon" type="image/svg+xml" href="logo.svg">
</head>
<body>
    <!-- Mobile Header -->
    <div class="mobile-header">
        <button class="mobile-toggle" id="mobile-toggle">
            <i class="fas fa-bars"></i>
        </button>
        <div class="sidebar-logo">
            <img src="logo.svg" alt="StackSleuth">
            <span>StackSleuth</span>
        </div>
    </div>

    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebar-overlay"></div>

    <div class="gitbook-container">
        <!-- Sidebar -->
        <nav class="gitbook-sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="index.html" class="sidebar-logo">
                    <img src="logo.svg" alt="StackSleuth">
                    <span>StackSleuth</span>
                </a>
            </div>

            <div class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">Getting Started</div>
                    <div class="nav-item">
                        <a href="index.html" class="nav-link">
                            <i class="fas fa-home icon"></i>
                            Overview
                        </a>
                    </div>
                    <div class="nav-item">
                        <a href="getting-started.html" class="nav-link">
                            <i class="fas fa-rocket icon"></i>
                            Quick Start
                        </a>
                    </div>
                    <div class="nav-item">
                        <a href="dashboard.html" class="nav-link">
                            <i class="fas fa-chart-line icon"></i>
                            Dashboard
                        </a>
                    </div>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Packages</div>
                    <div class="nav-item">
                        <a href="packages.html" class="nav-link">
                            <i class="fas fa-box icon"></i>
                            All Packages
                        </a>
                    </div>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Examples</div>
                    <div class="nav-item">
                        <a href="examples.html" class="nav-link">
                            <i class="fas fa-book icon"></i>
                            Examples Overview
                        </a>
                    </div>
                    <div class="nav-item">
                        <a href="examples-react.html" class="nav-link">
                            <i class="fab fa-react icon"></i>
                            React Examples
                        </a>
                    </div>
                    <div class="nav-item">
                        <a href="examples-vue.html" class="nav-link">
                            <i class="fab fa-vuejs icon"></i>
                            Vue Examples
                        </a>
                    </div>
                    <div class="nav-item">
                        <a href="examples-node.html" class="nav-link">
                            <i class="fab fa-node-js icon"></i>
                            Node.js Examples
                        </a>
                    </div>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Documentation</div>
                    <div class="nav-item">
                        <a href="api-reference.html" class="nav-link active">
                            <i class="fas fa-code icon"></i>
                            API Reference
                        </a>
                    </div>
                    <div class="nav-item">
                        <a href="configuration.html" class="nav-link">
                            <i class="fas fa-cog icon"></i>
                            Configuration
                        </a>
                    </div>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Resources</div>
                    <div class="nav-item">
                        <a href="https://github.com/Jack-GitHub12/StackSleuth" class="nav-link" target="_blank">
                            <i class="fab fa-github icon"></i>
                            GitHub Repository
                        </a>
                    </div>
                    <div class="nav-item">
                        <a href="https://www.npmjs.com/org/stacksleuth" class="nav-link" target="_blank">
                            <i class="fab fa-npm icon"></i>
                            NPM Packages
                        </a>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="gitbook-content">
            <!-- Header -->
            <header class="gitbook-header">
                <div class="breadcrumb">
                    <i class="fas fa-home"></i>
                    <span>Documentation</span>
                    <span>/</span>
                    <span>API Reference</span>
                </div>
                <div class="actions">
                    <div class="header-search">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" placeholder="Search API..." id="header-search">
                    </div>
                    <a href="https://github.com/Jack-GitHub12/StackSleuth" target="_blank" class="btn btn-secondary">
                        <i class="fab fa-github"></i>
                        GitHub
                    </a>
                </div>
            </header>

            <!-- Scroll Indicator -->
            <div class="scroll-indicator">
                <div class="scroll-progress" id="scroll-progress"></div>
            </div>

            <!-- Content -->
            <div class="content-wrapper">
                <div class="content-header">
                    <h1 class="content-title">API Reference</h1>
                    <p class="content-subtitle">Complete documentation for all StackSleuth APIs and methods</p>
                </div>

                <!-- ProfilerCore API -->
                <section id="profiler-core">
                    <h2>ProfilerCore</h2>
                    <p>The core profiling class that provides the foundation for all StackSleuth agents.</p>

                    <div class="api-method">
                        <h3>Constructor</h3>
                        <pre class="language-typescript"><code>new ProfilerCore(config: ProfilerConfig)</code></pre>

                        <h4>Parameters</h4>
                        <table class="params-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Type</th>
                                    <th>Required</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>config</code></td>
                                    <td><code>ProfilerConfig</code></td>
                                    <td>Yes</td>
                                    <td>Configuration object for the profiler</td>
                                </tr>
                                <tr>
                                    <td><code>config.apiKey</code></td>
                                    <td><code>string</code></td>
                                    <td>Yes</td>
                                    <td>Your StackSleuth API key</td>
                                </tr>
                                <tr>
                                    <td><code>config.environment</code></td>
                                    <td><code>string</code></td>
                                    <td>No</td>
                                    <td>Environment name (default: 'production')</td>
                                </tr>
                                <tr>
                                    <td><code>config.enabled</code></td>
                                    <td><code>boolean</code></td>
                                    <td>No</td>
                                    <td>Enable/disable profiling (default: true)</td>
                                </tr>
                            </tbody>
                        </table>

                        <h4>Example</h4>
                        <pre class="language-javascript"><code>const profiler = new ProfilerCore({
  apiKey: 'your-api-key',
  environment: 'production',
  enabled: process.env.NODE_ENV === 'production'
});</code></pre>
                    </div>

                    <div class="api-method">
                        <h3>startProfiling()</h3>
                        <pre class="language-typescript"><code>startProfiling(sessionId?: string): void</code></pre>
                        <p>Starts a new profiling session.</p>

                        <h4>Parameters</h4>
                        <table class="params-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Type</th>
                                    <th>Required</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>sessionId</code></td>
                                    <td><code>string</code></td>
                                    <td>No</td>
                                    <td>Optional custom session ID</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="api-method">
                        <h3>stopProfiling()</h3>
                        <pre class="language-typescript"><code>stopProfiling(): Promise&lt;ProfileReport&gt;</code></pre>
                        <p>Stops the current profiling session and returns the collected data.</p>

                        <h4>Returns</h4>
                        <p>A promise that resolves to a <code>ProfileReport</code> object containing all collected metrics.</p>

                        <h4>Example</h4>
                        <pre class="language-javascript"><code>const report = await profiler.stopProfiling();
console.log('Total duration:', report.duration);
console.log('Metrics collected:', report.metrics.length);</code></pre>
                    </div>

                    <div class="api-method">
                        <h3>captureMetric()</h3>
                        <pre class="language-typescript"><code>captureMetric(name: string, value: number, metadata?: object): void</code></pre>
                        <p>Captures a custom metric.</p>

                        <h4>Parameters</h4>
                        <table class="params-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Type</th>
                                    <th>Required</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>name</code></td>
                                    <td><code>string</code></td>
                                    <td>Yes</td>
                                    <td>Metric name (e.g., 'api.response.time')</td>
                                </tr>
                                <tr>
                                    <td><code>value</code></td>
                                    <td><code>number</code></td>
                                    <td>Yes</td>
                                    <td>Metric value</td>
                                </tr>
                                <tr>
                                    <td><code>metadata</code></td>
                                    <td><code>object</code></td>
                                    <td>No</td>
                                    <td>Additional metadata for the metric</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Metrics API -->
                <section id="metrics">
                    <h2>Metrics API</h2>
                    <p>Methods for working with performance metrics.</p>

                    <div class="api-method">
                        <h3>getMetrics()</h3>
                        <pre class="language-typescript"><code>getMetrics(filter?: MetricFilter): Metric[]</code></pre>
                        <p>Retrieves collected metrics with optional filtering.</p>

                        <h4>Example</h4>
                        <pre class="language-javascript"><code>// Get all metrics
const allMetrics = profiler.getMetrics();

// Get metrics by type
const apiMetrics = profiler.getMetrics({ type: 'api' });

// Get metrics within time range
const recentMetrics = profiler.getMetrics({
  startTime: Date.now() - 60000,
  endTime: Date.now()
});</code></pre>
                    </div>
                </section>

                <!-- Events API -->
                <section id="events">
                    <h2>Events API</h2>
                    <p>Event handling and custom event tracking.</p>

                    <div class="api-method">
                        <h3>on()</h3>
                        <pre class="language-typescript"><code>on(event: string, handler: Function): void</code></pre>
                        <p>Subscribes to profiler events.</p>

                        <h4>Available Events</h4>
                        <ul>
                            <li><code>metric:captured</code> - Fired when a metric is captured</li>
                            <li><code>session:start</code> - Fired when profiling starts</li>
                            <li><code>session:end</code> - Fired when profiling ends</li>
                            <li><code>error</code> - Fired on profiler errors</li>
                        </ul>

                        <h4>Example</h4>
                        <pre class="language-javascript"><code>profiler.on('metric:captured', (metric) => {
  console.log('New metric:', metric.name, metric.value);
});

profiler.on('error', (error) => {
  console.error('Profiler error:', error);
});</code></pre>
                    </div>
                </section>

                <!-- React API -->
                <section id="react-api">
                    <h2>React Agent API</h2>
                    <p>React-specific profiling methods and components.</p>

                    <div class="api-method">
                        <h3>ReactAgent.init()</h3>
                        <pre class="language-typescript"><code>ReactAgent.init(config: ReactAgentConfig): void</code></pre>
                        <p>Initializes the React profiling agent.</p>

                        <h4>Configuration Options</h4>
                        <table class="params-table">
                            <thead>
                                <tr>
                                    <th>Option</th>
                                    <th>Type</th>
                                    <th>Default</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>trackRenders</code></td>
                                    <td><code>boolean</code></td>
                                    <td>true</td>
                                    <td>Track component render cycles</td>
                                </tr>
                                <tr>
                                    <td><code>trackStateChanges</code></td>
                                    <td><code>boolean</code></td>
                                    <td>true</td>
                                    <td>Track state updates</td>
                                </tr>
                                <tr>
                                    <td><code>trackEffects</code></td>
                                    <td><code>boolean</code></td>
                                    <td>true</td>
                                    <td>Track useEffect executions</td>
                                </tr>
                                <tr>
                                    <td><code>componentWhitelist</code></td>
                                    <td><code>string[]</code></td>
                                    <td>[]</td>
                                    <td>Components to specifically track</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="api-method">
                        <h3>useProfiler Hook</h3>
                        <pre class="language-typescript"><code>useProfiler(componentName: string): ProfilerHook</code></pre>
                        <p>React hook for component-level profiling.</p>

                        <h4>Example</h4>
                        <pre class="language-javascript"><code>function MyComponent() {
  const profiler = useProfiler('MyComponent');

  const handleClick = () => {
    profiler.startMeasure('click-handler');
    // ... expensive operation
    profiler.endMeasure('click-handler');
  };

  return &lt;button onClick={handleClick}&gt;Click me&lt;/button&gt;;
}</code></pre>
                    </div>
                </section>

                <!-- Database API -->
                <section id="database-api">
                    <h2>Database Agent APIs</h2>
                    <p>APIs for database performance monitoring.</p>

                    <div class="api-method">
                        <h3>RedisAgent</h3>
                        <pre class="language-typescript"><code>new RedisAgent(config: AgentConfig)</code></pre>

                        <h4>Methods</h4>
                        <div class="method-list">
                            <div class="sub-method">
                                <h5>instrument()</h5>
                                <pre class="language-javascript"><code>instrument(client: RedisClient): void</code></pre>
                                <p>Instruments a Redis client for automatic tracking.</p>
                            </div>

                            <div class="sub-method">
                                <h5>getSlowQueries()</h5>
                                <pre class="language-javascript"><code>getSlowQueries(threshold?: number): Query[]</code></pre>
                                <p>Returns queries that exceeded the specified threshold (default: 100ms).</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- TypeScript Types -->
                <section id="types">
                    <h2>TypeScript Types</h2>
                    <p>Type definitions for TypeScript users.</p>

                    <div class="api-method">
                        <h3>Core Types</h3>
                        <pre class="language-typescript"><code>interface ProfilerConfig {
  apiKey: string;
  environment?: string;
  enabled?: boolean;
  endpoint?: string;
  batchSize?: number;
  flushInterval?: number;
}

interface Metric {
  name: string;
  value: number;
  timestamp: number;
  metadata?: Record&lt;string, any&gt;;
}

interface ProfileReport {
  sessionId: string;
  startTime: number;
  endTime: number;
  duration: number;
  metrics: Metric[];
  metadata: Record&lt;string, any&gt;;
}</code></pre>
                    </div>
                </section>

                <!-- Footer Navigation -->
                <div class="content-footer">
                    <a href="examples-node.html" class="footer-nav">
                        <i class="fas fa-arrow-left icon"></i>
                        <span>Previous: Node.js Examples</span>
                    </a>
                    <a href="configuration.html" class="footer-nav">
                        <span>Next: Configuration</span>
                        <i class="fas fa-arrow-right icon"></i>
                    </a>
                </div>
            </div>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-typescript.min.js"></script>
    <script src="js/gitbook.js"></script>
</body>
</html>
